{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/logan/Projects/in-death-tournament/client/src/app/tournaments/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\ninterface Tournament {\r\n    _id: string;\r\n    name: string;\r\n    description: string;\r\n    startDate: string;\r\n    endDate: string;\r\n    type: string;\r\n    rules: string;\r\n    createdBy?: { username: string };\r\n    participants?: { userId: string; username: string }[];\r\n}\r\n\r\nexport default function TournamentList() {\r\n    const [tournaments, setTournaments] = useState<Tournament[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(\"\");\r\n    const [user, setUser] = useState<{ _id: string; username: string } | null>(null);\r\n\r\n    useEffect(() => {\r\n        axios.get(\"http://localhost:5000/api/tournaments\")\r\n            .then(res => setTournaments(res.data))\r\n            .catch(err => setError(\"Failed to load tournaments\"))\r\n            .finally(() => setLoading(false));\r\n\r\n        // Get authenticated user\r\n        axios.get(\"http://localhost:5000/auth/user\", { withCredentials: true })\r\n            .then(res => setUser(res.data))\r\n            .catch(() => setUser(null));\r\n    }, []);\r\n\r\n    const handleJoin = async (tournamentId: string) => {\r\n        if (!user) {\r\n            alert(\"You must be logged in to join a tournament!\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await axios.post(`http://localhost:5000/api/tournaments/${tournamentId}/join`, {}, { withCredentials: true });\r\n            alert(res.data.message);\r\n            setTournaments(tournaments.map(t =>\r\n                t._id === tournamentId ? { ...t, participants: [...(t.participants || []), { userId: user._id, username: user.username }] } : t\r\n            ));\r\n        } catch (err: any) {\r\n            alert(err.response?.data?.message || \"Failed to join tournament.\");\r\n        }\r\n    };\r\n\r\n    if (loading) return <p>Loading tournaments...</p>;\r\n    if (error) return <p className=\"text-red-500\">{error}</p>;\r\n\r\n    return (\r\n        <main className=\"flex flex-col items-center p-10\">\r\n            <h1 className=\"text-3xl font-bold mb-4\">Tournaments</h1>\r\n            <div className=\"w-full max-w-3xl\">\r\n                {tournaments.length > 0 ? (\r\n                    tournaments.map(tournament => (\r\n                        <div key={tournament._id} className=\"p-4 mb-4 border rounded shadow\">\r\n                            <h2 className=\"text-xl font-bold\">{tournament.name}</h2>\r\n                            <p className=\"text-gray-600\">{tournament.description}</p>\r\n                            <p className=\"text-sm\">\r\n                                <strong>Start:</strong> {new Date(tournament.startDate).toLocaleDateString()} | \r\n                                <strong> End:</strong> {new Date(tournament.endDate).toLocaleDateString()}\r\n                            </p>\r\n                            <p className=\"text-sm\"><strong>Type:</strong> {tournament.type}</p>\r\n                            <p className=\"text-sm\"><strong>Rules:</strong> {tournament.rules}</p>\r\n                            {tournament.createdBy && (\r\n                                <p className=\"text-sm text-gray-500\">Created by: {tournament.createdBy.username}</p>\r\n                            )}\r\n                            <p className=\"text-sm\"><strong>Participants:</strong> {tournament.participants?.length || 0}</p>\r\n\r\n                            {user && !tournament.participants?.some(p => p.userId === user._id) && (\r\n                                <button\r\n                                    onClick={() => handleJoin(tournament._id)}\r\n                                    className=\"mt-2 px-4 py-2 bg-green-500 text-white rounded\"\r\n                                >\r\n                                    Join Tournament\r\n                                </button>\r\n                            )}\r\n\r\n                            {user && tournament.participants?.some(p => p.userId === user._id) && (\r\n                                <p className=\"text-green-500 mt-2\">âœ” You have joined this tournament</p>\r\n                            )}\r\n                        </div>\r\n                    ))\r\n                ) : (\r\n                    <p>No tournaments available.</p>\r\n                )}\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}