{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/logan/Projects/in-death-tournament/client/src/app/tournaments/%5Bid%5D/edit/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport axios from \"axios\";\r\n\r\nexport default function EditTournament() {\r\n    const params = useParams();\r\n    const router = useRouter();\r\n    const id = params.id as string;\r\n\r\n    const [tournament, setTournament] = useState<any>(null);\r\n    const [user, setUser] = useState<any>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(\"\");\r\n    const [formData, setFormData] = useState({\r\n        name: \"\",\r\n        description: \"\",\r\n        startDate: \"\",\r\n        endDate: \"\",\r\n        type: \"high-score\",\r\n        weaponType: \"Any\",\r\n        rules: \"\"\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (!id) return;\r\n\r\n        axios.get(`http://localhost:5000/api/tournaments/${id}`)\r\n            .then(res => {\r\n                setTournament(res.data);\r\n                setFormData({\r\n                    name: res.data.name,\r\n                    description: res.data.description,\r\n                    startDate: res.data.startDate.split(\"T\")[0],\r\n                    endDate: res.data.endDate.split(\"T\")[0],\r\n                    type: res.data.type,\r\n                    weaponType: res.data.weaponType || \"Any\",\r\n                    rules: res.data.rules\r\n                });\r\n            })\r\n            .catch(() => setError(\"Tournament not found\"))\r\n            .finally(() => setLoading(false));\r\n\r\n        axios.get(\"http://localhost:5000/auth/user\", { withCredentials: true })\r\n            .then(res => setUser(res.data))\r\n            .catch(() => setUser(null));\r\n    }, [id]);\r\n\r\n    const handleChange = (e: any) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e: any) => {\r\n        e.preventDefault();\r\n        try {\r\n            await axios.put(`http://localhost:5000/api/tournaments/${id}`, formData, { withCredentials: true });\r\n            alert(\"Tournament updated successfully!\");\r\n            router.push(`/tournaments/${id}`);\r\n        } catch (err) {\r\n            alert(\"Failed to update tournament.\");\r\n        }\r\n    };\r\n\r\n    if (loading) return <p>Loading tournament...</p>;\r\n    if (error) return <p className=\"text-red-500\">{error}</p>;\r\n    if (!tournament) return null;\r\n\r\n    if (!user || !tournament?.createdBy || (!user.roles.includes(\"admin\") && user._id !== tournament.createdBy._id)) {\r\n        return <p className=\"text-red-500\">Access denied. You cannot edit this tournament.</p>;\r\n    }\r\n\r\n    return (\r\n        <main className=\"flex flex-col items-center p-10 bg-[#0d1017] min-h-screen\">\r\n            <h1 className=\"text-3xl font-bold text-white\">Edit Tournament</h1>\r\n            <form className=\"w-full max-w-lg bg-[#161b22] p-6 shadow-lg rounded-lg border border-gray-700\" onSubmit={handleSubmit}>\r\n                <label className=\"text-white block\">Name:</label>\r\n                <input type=\"text\" name=\"name\" value={formData.name} onChange={handleChange} className=\"border p-2 w-full bg-[#0d1017] text-white\" required />\r\n\r\n                <label className=\"text-white block mt-2\">Description:</label>\r\n                <textarea name=\"description\" value={formData.description} onChange={handleChange} className=\"border p-2 w-full bg-[#0d1017] text-white\" required />\r\n\r\n                <label className=\"text-white block mt-2\">Start Date:</label>\r\n                <input type=\"date\" name=\"startDate\" value={formData.startDate} onChange={handleChange} className=\"border p-2 w-full bg-[#0d1017] text-white\" required />\r\n\r\n                <label className=\"text-white block mt-2\">End Date:</label>\r\n                <input type=\"date\" name=\"endDate\" value={formData.endDate} onChange={handleChange} className=\"border p-2 w-full bg-[#0d1017] text-white\" required />\r\n\r\n                <label className=\"text-white block mt-2\">Type:</label>\r\n                <select name=\"type\" value={formData.type} onChange={handleChange} className=\"border p-2 w-full bg-[#0d1017] text-white\">\r\n                    <option value=\"high-score\">High Score</option>\r\n                    <option value=\"elimination\">Elimination</option>\r\n                </select>\r\n\r\n                <label className=\"text-white block mt-2\">Weapon Type:</label>\r\n                <select name=\"weaponType\" value={formData.weaponType} onChange={handleChange} className=\"border p-2 w-full bg-[#0d1017] text-white\">\r\n                    <option value=\"Any\">Any</option>\r\n                    <option value=\"Bow\">Bow</option>\r\n                    <option value=\"Crossbow\">Crossbow</option>\r\n                </select>\r\n\r\n                <label className=\"text-white block mt-2\">Rules:</label>\r\n                <textarea name=\"rules\" value={formData.rules} onChange={handleChange} className=\"border p-2 w-full bg-[#0d1017] text-white\" required />\r\n\r\n                <button type=\"submit\" className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\">\r\n                    Update Tournament\r\n                </button>\r\n            </form>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}