{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/logan/Projects/in-death-tournament/client/src/app/tournaments/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport axios from \"axios\";\r\nimport Link from \"next/link\";\r\nimport ScoreSubmission from \"../../../components/ScoreSubmission\";\r\n\r\ninterface Tournament {\r\n    _id: string;\r\n    name: string;\r\n    description: string;\r\n    startDate: string;\r\n    endDate: string;\r\n    type: string;\r\n    rules: string;\r\n    createdBy: { _id: string; username: string };\r\n    participants: { userId: string; username: string; score: number; proof: string }[];\r\n}\r\n\r\nexport default function TournamentDetails() {\r\n    const { id } = useParams(); // ✅ Get tournament ID from URL\r\n    const router = useRouter();\r\n    const [tournament, setTournament] = useState<Tournament | null>(null);\r\n    const [user, setUser] = useState<{ _id: string; username: string; role: string } | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (!id) return;\r\n\r\n        // ✅ Fetch tournament data\r\n        axios.get(`http://localhost:5000/api/tournaments/${id}`)\r\n            .then(res => setTournament(res.data))\r\n            .catch(() => setError(\"Tournament not found\"))\r\n            .finally(() => setLoading(false));\r\n\r\n        // ✅ Fetch user data\r\n        axios.get(\"http://localhost:5000/auth/user\", { withCredentials: true })\r\n            .then(res => setUser(res.data))\r\n            .catch(() => setUser(null));\r\n    }, [id]);\r\n\r\n    const handleDelete = async () => {\r\n        if (!confirm(\"Are you sure you want to delete this tournament?\")) return;\r\n\r\n        try {\r\n            await axios.delete(`http://localhost:5000/api/tournaments/${id}`, { withCredentials: true });\r\n            alert(\"Tournament deleted!\");\r\n            router.push(\"/tournaments\");\r\n        } catch (err) {\r\n            alert(\"Failed to delete tournament.\");\r\n        }\r\n    };\r\n\r\n    if (loading) return <p>Loading tournament...</p>;\r\n    if (error) return <p className=\"text-red-500\">{error}</p>;\r\n    if (!tournament) return null;\r\n\r\n    return (\r\n        <main className=\"flex flex-col items-center p-10\">\r\n            <h1 className=\"text-3xl font-bold\">{tournament.name}</h1>\r\n            <p className=\"text-gray-600\">{tournament.description}</p>\r\n            <p className=\"text-sm\">\r\n                <strong>Start:</strong> {new Date(tournament.startDate).toLocaleDateString()} |\r\n                <strong> End:</strong> {new Date(tournament.endDate).toLocaleDateString()}\r\n            </p>\r\n            <p className=\"text-sm\"><strong>Type:</strong> {tournament.type}</p>\r\n            <p className=\"text-sm\"><strong>Rules:</strong> {tournament.rules}</p>\r\n            <p className=\"text-sm text-gray-500\">Created by: {tournament.createdBy.username}</p>\r\n\r\n            <h2 className=\"text-xl font-bold mt-4\">Participants</h2>\r\n            <ul className=\"list-disc\">\r\n                {tournament.participants.length > 0 ? (\r\n                    tournament.participants.map((p) => (\r\n                        <li key={p.userId}>{p.username}</li>\r\n                    ))\r\n                ) : (\r\n                    <p>No participants yet.</p>\r\n                )}\r\n            </ul>\r\n\r\n            {/* ✅ Show Edit/Delete buttons only if the user is an admin or the creator */}\r\n            {user && (user.role === \"admin\" || user._id === tournament.createdBy._id) && (\r\n                <div className=\"mt-4\">\r\n                    <button\r\n                        className=\"px-4 py-2 bg-red-500 text-white rounded\"\r\n                        onClick={handleDelete}\r\n                    >\r\n                        Delete Tournament\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            {user && (user.role === \"admin\" || user._id === tournament.createdBy._id) && (\r\n                <Link href={`/tournaments/${tournament._id}/edit`}>\r\n                    <button className=\"mt-4 px-4 py-2 bg-yellow-500 text-white rounded\">\r\n                        Edit Tournament\r\n                    </button>\r\n                </Link>\r\n            )}\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}