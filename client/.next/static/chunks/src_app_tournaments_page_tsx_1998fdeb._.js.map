{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/logan/Projects/in-death-tournament/client/src/app/tournaments/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Link from \"next/link\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\ninterface Tournament {\r\n    _id: string;\r\n    name: string;\r\n    description: string;\r\n    startDate: string;\r\n    endDate: string;\r\n    type: string;\r\n    weaponType?: string;\r\n    rules: string;\r\n    createdBy?: { username: string };\r\n    participants?: { userId: string; username: string }[];\r\n}\r\n\r\nexport default function TournamentList() {\r\n    const [tournaments, setTournaments] = useState<Tournament[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(\"\");\r\n    const [user, setUser] = useState<{ _id: string; username: string } | null>(null);\r\n\r\n    const listVariants = {\r\n        hidden: { opacity: 0 },\r\n        show: {\r\n            opacity: 1,\r\n            transition: {\r\n                staggerChildren: 0.1,\r\n            },\r\n        },\r\n    };\r\n\r\n    const itemVariants = {\r\n        hidden: { opacity: 0, y: 20 },\r\n        show: { opacity: 1, y: 0 },\r\n    };\r\n\r\n    useEffect(() => {\r\n        axios.get(\"http://localhost:5000/api/tournaments\")\r\n            .then(res => setTournaments(res.data))\r\n            .catch(() => setError(\"Failed to load tournaments\"))\r\n            .finally(() => setLoading(false));\r\n\r\n        axios.get(\"http://localhost:5000/auth/user\", { withCredentials: true })\r\n            .then(res => setUser(res.data))\r\n            .catch(() => setUser(null));\r\n    }, []);\r\n\r\n    const handleJoin = async (tournamentId: string) => {\r\n        if (!user) {\r\n            alert(\"You must be logged in to join a tournament!\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await axios.post(\r\n                `http://localhost:5000/api/tournaments/${tournamentId}/join`,\r\n                {},\r\n                { withCredentials: true }\r\n            );\r\n            alert(res.data.message);\r\n\r\n            setTournaments(prev =>\r\n                prev.map(t =>\r\n                    t._id === tournamentId\r\n                        ? {\r\n                            ...t,\r\n                            participants: [\r\n                                ...(t.participants || []),\r\n                                { userId: user._id, username: user.username }\r\n                            ]\r\n                        }\r\n                        : t\r\n                )\r\n            );\r\n        } catch (err: any) {\r\n            alert(err.response?.data?.message || \"Failed to join tournament.\");\r\n        }\r\n    };\r\n\r\n    if (loading) return <p>Loading tournaments...</p>;\r\n    if (error) return <p className=\"text-red-500\">{error}</p>;\r\n\r\n    return (\r\n        <main className=\"flex flex-col items-center p-10\">\r\n            <div className=\"relative w-full max-w-3xl mt-6 mb-6\">\r\n                <Link href=\"/\">\r\n                    <p className=\"absolute left-0 top-1/2 -translate-y-1/2 text-blue-600 cursor-pointer hover:underline\">\r\n                        Back\r\n                    </p>\r\n                </Link>\r\n                <h1 className=\"text-3xl font-bold text-center\">Tournaments</h1>\r\n            </div>\r\n\r\n            <motion.div\r\n                className=\"w-full max-w-3xl\"\r\n                variants={listVariants}\r\n                initial=\"hidden\"\r\n                animate=\"show\"\r\n            >\r\n                <AnimatePresence>\r\n                    {tournaments.length > 0 ? (\r\n                        tournaments.map(tournament => (\r\n                            <motion.div\r\n                                key={tournament._id}\r\n                                className=\"p-4 mb-4 border rounded shadow blue-border\"\r\n                                variants={itemVariants}\r\n                                initial=\"hidden\"\r\n                                animate=\"show\"\r\n                                exit=\"hidden\"\r\n                            >\r\n                                <h2 className=\"text-xl font-bold\">\r\n                                    <Link\r\n                                        href={`/tournaments/${tournament._id}`}\r\n                                        className=\"text-blue-500 underline\"\r\n                                    >\r\n                                        {tournament.name}\r\n                                    </Link>\r\n                                </h2>\r\n                                <p className=\"text-gray-600\">{tournament.description}</p>\r\n                                <p className=\"text-sm\">\r\n                                    <strong>Start:</strong> {new Date(tournament.startDate).toLocaleDateString()} |\r\n                                    <strong> End:</strong> {new Date(tournament.endDate).toLocaleDateString()}\r\n                                </p>\r\n                                <p className=\"text-sm\"><strong>Type:</strong> {tournament.type}</p>\r\n                                <p className=\"text-sm\"><strong>Weapon Type:</strong> {tournament.weaponType || \"Any\"}</p>\r\n                                <p className=\"text-sm\"><strong>Rules:</strong> {tournament.rules}</p>\r\n                                {tournament.createdBy && (\r\n                                    <p className=\"text-sm text-gray-500\">\r\n                                        Created by: {tournament.createdBy.username}\r\n                                    </p>\r\n                                )}\r\n                                <p className=\"text-sm\">\r\n                                    <strong>Participants:</strong> {tournament.participants?.length || 0}\r\n                                </p>\r\n\r\n                                {user && !tournament.participants?.some(p => p.userId === user._id) && (\r\n                                    <button\r\n                                        onClick={() => handleJoin(tournament._id)}\r\n                                        className=\"mt-2 px-4 py-2 bg-green-500 text-white rounded\"\r\n                                    >\r\n                                        Join Tournament\r\n                                    </button>\r\n                                )}\r\n\r\n                                {user && tournament.participants?.some(p => p.userId === user._id) && (\r\n                                    <p className=\"text-green-500 mt-2\">âœ” You have joined this tournament</p>\r\n                                )}\r\n                            </motion.div>\r\n                        ))\r\n                    ) : (\r\n                        <p>No tournaments available.</p>\r\n                    )}\r\n                </AnimatePresence>\r\n            </motion.div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}