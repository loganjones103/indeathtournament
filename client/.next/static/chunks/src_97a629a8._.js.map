{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/logan/Projects/in-death-tournament/client/src/components/UserDropdown.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport axios from \"axios\";\r\nimport Link from \"next/link\";\r\n\r\ninterface User {\r\n    _id: string;\r\n    username: string;\r\n    avatar: string;\r\n    roles: string[];\r\n}\r\n\r\nexport default function UserDropdown() {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        axios\r\n            .get(\"http://localhost:5000/auth/user\", { withCredentials: true })\r\n            .then((res) => setUser(res.data))\r\n            .catch(() => setUser(null));\r\n    }, []);\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            await axios.get(\"http://localhost:5000/auth/logout\", { withCredentials: true });\r\n            setUser(null);\r\n            window.location.reload();\r\n        } catch (error) {\r\n            console.error(\"Logout failed:\", error);\r\n        }\r\n    };\r\n\r\n    const handleLogin = () => {\r\n        window.location.href = \"http://localhost:5000/auth/google\";\r\n    };\r\n\r\n    useEffect(() => {\r\n        function handleClickOutside(event: MouseEvent) {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n            }\r\n        }\r\n\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"relative\" ref={dropdownRef}>\r\n            {user ? (\r\n                <button\r\n                    onClick={() => setIsOpen((prev) => !prev)}\r\n                    className=\"focus:outline-none\"\r\n                >\r\n                    <img\r\n                        src={user.avatar.startsWith(\"http\") ? user.avatar : `http://localhost:5000${user.avatar}`}\r\n                        alt=\"User Avatar\"\r\n                        className=\"w-10 h-10 rounded-full cursor-pointer\"\r\n                    />\r\n\r\n                </button>\r\n            ) : (\r\n                <button\r\n                    onClick={handleLogin}\r\n                    className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n                >\r\n                    Login\r\n                </button>\r\n            )}\r\n\r\n            <AnimatePresence>\r\n                {isOpen && user && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: -5 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: -5 }}\r\n                        transition={{ duration: 0.2 }}\r\n                        className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50\"\r\n                    >\r\n                        <p className=\"px-4 py-2 text-gray-700 font-semibold\">{user.username}</p>\r\n\r\n                        {user.roles.includes(\"admin\") && (\r\n                            <Link href=\"/admin/users\">\r\n                                <p className=\"px-4 py-2 text-blue-600 hover:bg-gray-100 cursor-pointer\">\r\n                                    Manage Users\r\n                                </p>\r\n                            </Link>\r\n                        )}\r\n\r\n                        <button\r\n                            onClick={handleLogout}\r\n                            className=\"w-full text-left px-4 py-2 text-red-500 hover:bg-gray-100\"\r\n                        >\r\n                            Logout\r\n                        </button>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAce,SAAS;;IACpB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAkB;IAE3C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACN,wIAAA,CAAA,UAAK,CACA,GAAG,CAAC,mCAAmC;gBAAE,iBAAiB;YAAK,GAC/D,IAAI;0CAAC,CAAC,MAAQ,QAAQ,IAAI,IAAI;yCAC9B,KAAK;0CAAC,IAAM,QAAQ;;QAC7B;iCAAG,EAAE;IAEL,MAAM,eAAe;QACjB,IAAI;YACA,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,qCAAqC;gBAAE,iBAAiB;YAAK;YAC7E,QAAQ;YACR,OAAO,QAAQ,CAAC,MAAM;QAC1B,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,kBAAkB;QACpC;IACJ;IAEA,MAAM,cAAc;QAChB,OAAO,QAAQ,CAAC,IAAI,GAAG;IAC3B;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACN,SAAS,mBAAmB,KAAiB;gBACzC,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;oBAC5E,UAAU;gBACd;YACJ;YAEA,SAAS,gBAAgB,CAAC,aAAa;YACvC;0CAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;;QAC3D;iCAAG,EAAE;IAEL,qBACI,6LAAC;QAAI,WAAU;QAAW,KAAK;;YAC1B,qBACG,6LAAC;gBACG,SAAS,IAAM,UAAU,CAAC,OAAS,CAAC;gBACpC,WAAU;0BAEV,cAAA,6LAAC;oBACG,KAAK,KAAK,MAAM,CAAC,UAAU,CAAC,UAAU,KAAK,MAAM,GAAG,CAAC,qBAAqB,EAAE,KAAK,MAAM,EAAE;oBACzF,KAAI;oBACJ,WAAU;;;;;;;;;;qCAKlB,6LAAC;gBACG,SAAS;gBACT,WAAU;0BACb;;;;;;0BAKL,6LAAC,4LAAA,CAAA,kBAAe;0BACX,UAAU,sBACP,6LAAC,6LAAA,CAAA,SAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,SAAS;wBAAG,OAAO;wBAAM,GAAG,CAAC;oBAAE;oBAC1C,SAAS;wBAAE,SAAS;wBAAG,OAAO;wBAAG,GAAG;oBAAE;oBACtC,MAAM;wBAAE,SAAS;wBAAG,OAAO;wBAAM,GAAG,CAAC;oBAAE;oBACvC,YAAY;wBAAE,UAAU;oBAAI;oBAC5B,WAAU;;sCAEV,6LAAC;4BAAE,WAAU;sCAAyC,KAAK,QAAQ;;;;;;wBAElE,KAAK,KAAK,CAAC,QAAQ,CAAC,0BACjB,6LAAC,+JAAA,CAAA,UAAI;4BAAC,MAAK;sCACP,cAAA,6LAAC;gCAAE,WAAU;0CAA2D;;;;;;;;;;;sCAMhF,6LAAC;4BACG,SAAS;4BACT,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAQzB;GA1FwB;KAAA","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/logan/Projects/in-death-tournament/client/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\n// Define User Type\r\ninterface User {\r\n  _id: string;\r\n  username: string;\r\n  avatar: string;\r\n  roles: string[];\r\n}\r\n\r\n// Create Context\r\nconst AuthContext = createContext<{ user: User | null, setUser: (user: User | null) => void }>({\r\n  user: null,\r\n  setUser: () => {}\r\n});\r\n\r\n// ✅ Provide AuthContext in `AuthWrapper.tsx`\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            try {\r\n                const res = await axios.get(\"http://localhost:5000/auth/user\", { withCredentials: true });\r\n                setUser(res.data);\r\n            } catch (error) {\r\n                setUser(null);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchUser();\r\n    }, []);\r\n\r\n    if (loading) return <p>Loading...</p>;\r\n\r\n    return <AuthContext.Provider value={{ user, setUser }}>{children}</AuthContext.Provider>;\r\n}\r\n\r\n// ✅ Custom Hook to Use Auth\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAcA,iBAAiB;AACjB,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAA+D;IAC7F,MAAM;IACN,SAAS,KAAO;AAClB;AAGO,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACpE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACN,MAAM;oDAAY;oBACd,IAAI;wBACA,MAAM,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,mCAAmC;4BAAE,iBAAiB;wBAAK;wBACvF,QAAQ,IAAI,IAAI;oBACpB,EAAE,OAAO,OAAO;wBACZ,QAAQ;oBACZ,SAAU;wBACN,WAAW;oBACf;gBACJ;;YAEA;QACJ;iCAAG,EAAE;IAEL,IAAI,SAAS,qBAAO,6LAAC;kBAAE;;;;;;IAEvB,qBAAO,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;QAAQ;kBAAI;;;;;;AAC5D;GAvBgB;;QAGG,qIAAA,CAAA,YAAS;;;KAHZ;AA0BT,SAAS;;IACd,OAAO,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;AACpB;IAFgB","debugId":null}}]
}