{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/logan/Projects/in-death-tournament/client/src/components/UserDropdown.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport axios from \"axios\";\r\n\r\ninterface User {\r\n    _id: string;\r\n    username: string;\r\n    avatar: string;\r\n    role: string;\r\n}\r\n\r\nexport default function UserDropdown() {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n    console.log(\"✅ UserDropdown component rendered!\");\r\n\r\n    // ✅ Fetch user data on mount\r\n    useEffect(() => {\r\n        axios\r\n            .get(\"http://localhost:5000/auth/user\", { withCredentials: true })\r\n            .then((res) => setUser(res.data))\r\n            .catch(() => setUser(null));\r\n    }, []);\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            await axios.get(\"http://localhost:5000/auth/logout\", { withCredentials: true });\r\n            setUser(null);\r\n            window.location.reload(); // ✅ Forces UI update\r\n        } catch (error) {\r\n            console.error(\"Logout failed:\", error);\r\n        }\r\n    };\r\n\r\n\r\n    const handleLogin = () => {\r\n        window.location.href = \"http://localhost:5000/auth/google\";\r\n    };\r\n\r\n    // ✅ Close dropdown when clicking outside\r\n    useEffect(() => {\r\n        function handleClickOutside(event: MouseEvent) {\r\n            console.log(\"🖱 Click detected on:\", event.target);\r\n\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                console.log(\"❌ Closing dropdown\");\r\n                setIsOpen(false);\r\n            }\r\n        }\r\n\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => {\r\n            console.log(\"🚀 Removing event listener\");\r\n            document.removeEventListener(\"mousedown\", handleClickOutside);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"relative\" ref={dropdownRef}>\r\n            {user ? (\r\n                <button\r\n                    onClick={() => {\r\n                        console.log(\"🔄 Toggling dropdown:\", !isOpen);\r\n                        setIsOpen((prev) => !prev);\r\n                    }}\r\n                    className=\"focus:outline-none\"\r\n                >\r\n                    <img\r\n                        src={user.avatar}\r\n                        alt=\"User Avatar\"\r\n                        className=\"w-10 h-10 rounded-full cursor-pointer\"\r\n                    />\r\n                </button>\r\n            ) : (\r\n                <button\r\n                    onClick={handleLogin}\r\n                    className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n                >\r\n                    Login\r\n                </button>\r\n            )}\r\n\r\n            {/* ✅ Dropdown Menu with Framer Motion Animation */}\r\n            <AnimatePresence>\r\n                {isOpen && user && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: -5 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: -5 }}\r\n                        transition={{ duration: 0.2 }}\r\n                        className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50\"\r\n                    >\r\n                        <p className=\"px-4 py-2 text-gray-700 font-semibold\">{user.username}</p>\r\n                        <button\r\n                            onClick={handleLogout}\r\n                            className=\"w-full text-left px-4 py-2 text-red-500 hover:bg-gray-100\"\r\n                        >\r\n                            Logout\r\n                        </button>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;;;AAJA;;;;AAae,SAAS;;IACpB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAkB;IAE3C,QAAQ,GAAG,CAAC;IAEZ,6BAA6B;IAC7B,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACN,wIAAA,CAAA,UAAK,CACA,GAAG,CAAC,mCAAmC;gBAAE,iBAAiB;YAAK,GAC/D,IAAI;0CAAC,CAAC,MAAQ,QAAQ,IAAI,IAAI;yCAC9B,KAAK;0CAAC,IAAM,QAAQ;;QAC7B;iCAAG,EAAE;IAEL,MAAM,eAAe;QACjB,IAAI;YACA,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,qCAAqC;gBAAE,iBAAiB;YAAK;YAC7E,QAAQ;YACR,OAAO,QAAQ,CAAC,MAAM,IAAI,qBAAqB;QACnD,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,kBAAkB;QACpC;IACJ;IAGA,MAAM,cAAc;QAChB,OAAO,QAAQ,CAAC,IAAI,GAAG;IAC3B;IAEA,yCAAyC;IACzC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACN,SAAS,mBAAmB,KAAiB;gBACzC,QAAQ,GAAG,CAAC,yBAAyB,MAAM,MAAM;gBAEjD,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;oBAC5E,QAAQ,GAAG,CAAC;oBACZ,UAAU;gBACd;YACJ;YAEA,SAAS,gBAAgB,CAAC,aAAa;YACvC;0CAAO;oBACH,QAAQ,GAAG,CAAC;oBACZ,SAAS,mBAAmB,CAAC,aAAa;gBAC9C;;QACJ;iCAAG,EAAE;IAEL,qBACI,6LAAC;QAAI,WAAU;QAAW,KAAK;;YAC1B,qBACG,6LAAC;gBACG,SAAS;oBACL,QAAQ,GAAG,CAAC,yBAAyB,CAAC;oBACtC,UAAU,CAAC,OAAS,CAAC;gBACzB;gBACA,WAAU;0BAEV,cAAA,6LAAC;oBACG,KAAK,KAAK,MAAM;oBAChB,KAAI;oBACJ,WAAU;;;;;;;;;;qCAIlB,6LAAC;gBACG,SAAS;gBACT,WAAU;0BACb;;;;;;0BAML,6LAAC,4LAAA,CAAA,kBAAe;0BACX,UAAU,sBACP,6LAAC,6LAAA,CAAA,SAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,SAAS;wBAAG,OAAO;wBAAM,GAAG,CAAC;oBAAE;oBAC1C,SAAS;wBAAE,SAAS;wBAAG,OAAO;wBAAG,GAAG;oBAAE;oBACtC,MAAM;wBAAE,SAAS;wBAAG,OAAO;wBAAM,GAAG,CAAC;oBAAE;oBACvC,YAAY;wBAAE,UAAU;oBAAI;oBAC5B,WAAU;;sCAEV,6LAAC;4BAAE,WAAU;sCAAyC,KAAK,QAAQ;;;;;;sCACnE,6LAAC;4BACG,SAAS;4BACT,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAQzB;GA/FwB;KAAA","debugId":null}}]
}